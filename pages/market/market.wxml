<!--主页面-->
<view class="container display-flex-column">
  <view class="topview display-flex-column" style="background:url(http://gym.eeyes.xyz/static/topview.png);background-size:cover;background-repeat:no-repeat;">
    <view class="toptitle t-s t-color-white">秤食堂/秤商店</view>
    <view class="topcontent t-b t-color-white">定制您的私人膳食</view>
  </view>
  <view class="searchbox display-flex-row">
    <image class="searchicon" src="/images/search.png"></image>
    <input class="searchinput t-s" placeholder="输入食谱、食材或其他商品"></input>
  </view>
  <view class="shopbody">
    <view class="navbarbox">
      <view class="navbar1" bindtap="nav" data-id="0" style="color:{{currenttab==0?'#484848':'#D7D7D7'}}">秤食堂</view>
      <view class="navbar2" bindtap="nav" data-id="1" style="color:{{currenttab==1?'#484848':'#D7D7D7'}}">秤商店</view>
    </view>
  </view>
  <view class="introduce t-m t-color-black">这是一段秤食堂的简介，减肥健身，掌控人生专业的在线体重管理平台强大的食品营养数据库，立即定制您的私人饮食</view>
  <view class="itemlist">
    <view class="item display-flex-column" wx:for="{{goods}}" wx:key>
      <view class="item_image" style="background:{{item.imagesrc}}"></view>
      <view class="item_name t-vs t-color-black">{{item.name}}</view>
      <view class="item_infobox display-flex-row">
        <view class="item_price">¥{{item.price}}/</view>
        <view class="item_status">{{item.status}}</view>
      </view>
      <view class="item_starbox display-flex-row">
        <image class="item_star" src="/images/star.png"></image>
        <view class="item_starnum">{{item.starnum}}</view>
      </view>
      <view class="item_addbox display-flex-row">
        <view class="item_add">+</view>
      </view>
    </view>
  </view>
</view>

<!-- 购物按钮 -->
<view style="z-index:1" bindtap="showshopwindow" class='shopcarbtn'>
  <view class="display-flex-column">
    <image class="shopcarimage" src="/images/shopcar.png"></image>
  </view>
  <view class="shopcarnum" style="width:{{25+(messagenum.length-1)*10}}rpx">{{messagenum}}</view>
</view>

<!-- 购物车页面 -->
<view class="mask" style="z-index:2" wx:if="{{showshopwindow}}" bindtap="hideshopwindow"></view>
<scroll-view class="shopwindow" scroll-y="true" wx:if="{{showshopwindow}}">
  <view class='shop_title'>所有商品</view>
  <view wx:for="{{goods}}" wx:key="item.id" wx:if="{{item.takeout.amount || item.material.amount || item.recipes.amount }}" class='goods'>
    <view class='box_title'>{{item.name}}</view>
    <view class='box_box' wx:if="{{item.takeout.amount!==0}}">
      <view class='box_name'>
        <view>成餐外卖</view>
        <view>￥{{item.takeout.price}}</view>
      </view>
      <view class='box_choose'>
        <view class='box_decrease' bindtap="increase" data-index="{{index}}" data-item="takeout" data-increase="-1">-</view>
        <view>{{item.takeout.amount}}</view>
        <view class='box_increase' bindtap="increase" data-index="{{index}}" data-item="takeout" data-increase="1">+</view>
      </view>
    </view>
    <view class='box_box' wx:if="{{item.material.amount!==0}}">
      <view class='box_name'>
        <view>新鲜食材速递</view>
        <view>￥{{item.material.price}}</view>
      </view>
      <view class='box_choose'>
        <view class='box_decrease' bindtap="increase" data-index="{{index}}" data-item="material" data-increase="-1">-</view>
        <view>{{item.material.amount}}</view>
        <view class='box_increase' bindtap="increase" data-index="{{index}}" data-item="material" data-increase="1">+</view>
      </view>
    </view>
    <view class='box_box' wx:if="{{item.material.amount!==0 || item.takeout.amount!==0}}">
      <view class='box_name'>
        <view>食谱</view>
        <view>￥{{item.recipes.price}}</view>
      </view>
      <view class='box_choose'>
        <view class='box_decrease'>-</view>
        <view>{{(item.material.amount!==0 || item.takeout.amount!==0)?1:0}}</view>
        <view class='box_decrease'>+</view>
      </view>
    </view>
  </view>
</scroll-view>